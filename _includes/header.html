<header class="site-header" role="banner">
    <div class="wrapper">
        <div class="site-header-content">
            <a class="site-title" href="{{ '/' | relative_url }}">
                <div class="logo">
                    <h1>PKUX LAB</h1>
                    <p class="tagline">Information Experience Lab</p>
                </div>
            </a>

            <nav class="site-nav">
                <input type="checkbox" id="nav-trigger" class="nav-trigger" />
                <label for="nav-trigger">
                    <span class="menu-icon">
                        <svg viewBox="0 0 18 15" width="18px" height="15px">
                            <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.484C18,14.304,17.335,14.969,16.516,14.969H1.484 C0.665,14.969,0,14.304,0,13.484l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.001,18,12.665,18,13.484L18,13.484z"/>
                        </svg>
                    </span>
                </label>

                <div class="trigger">
                    {% if page.lang == 'en' %}
                        <a class="page-link" href="{{ '/en/' | relative_url }}">Home</a>
                        <a class="page-link" href="{{ '/en/about' | relative_url }}">About</a>
                        <a class="page-link" href="{{ '/en/research' | relative_url }}">Research</a>
                        <a class="page-link" href="{{ '/en/team' | relative_url }}">Team</a>
                        <a class="page-link" href="{{ '/en/publications' | relative_url }}">Publications</a>
                        
                        <!-- News Dropdown -->
                        <div class="nav-dropdown">
                            <a class="page-link dropdown-toggle" href="{{ '/en/news' | relative_url }}">News</a>
                            <div class="dropdown-content">
                                {% assign recent_news = site.news | where: "lang", "en" | sort: 'date' | reverse | limit: 5 %}
                                {% for post in recent_news %}
                                    <a href="{{ post.url | relative_url }}" class="dropdown-item">
                                        <span class="news-date">{{ post.date | date: "%b %d" }}</span>
                                        <span class="news-title">{{ post.title | truncate: 40 }}</span>
                                    </a>
                                {% endfor %}
                                <a href="{{ '/en/news' | relative_url }}" class="dropdown-item view-all">View All News →</a>
                            </div>
                        </div>
                        
                        <a class="page-link" href="{{ '/en/contact' | relative_url }}">Contact</a>
                    {% else %}
                        <a class="page-link" href="{{ '/' | relative_url }}">首页</a>
                        <a class="page-link" href="{{ '/about' | relative_url }}">关于我们</a>
                        <a class="page-link" href="{{ '/research' | relative_url }}">研究方向</a>
                        <a class="page-link" href="{{ '/team' | relative_url }}">团队成员</a>
                        <a class="page-link" href="{{ '/publications' | relative_url }}">学术成果</a>
                        
                        <!-- News Dropdown -->
                        <div class="nav-dropdown">
                            <a class="page-link dropdown-toggle" href="{{ '/news' | relative_url }}">新闻动态</a>
                            <div class="dropdown-content">
                                {% assign recent_news = site.news | where: "lang", "cn" | sort: 'date' | reverse | limit: 5 %}
                                {% for post in recent_news %}
                                    <a href="{{ post.url | relative_url }}" class="dropdown-item">
                                        <span class="news-date">{{ post.date | date: "%m月%d日" }}</span>
                                        <span class="news-title">{{ post.title | truncate: 20 }}</span>
                                    </a>
                                {% endfor %}
                                <a href="{{ '/news' | relative_url }}" class="dropdown-item view-all">查看所有新闻 →</a>
                            </div>
                        </div>
                        
                        <a class="page-link" href="{{ '/contact' | relative_url }}">联系我们</a>
                    {% endif %}
                </div>
            </nav>

            <div class="language-switcher">
                {% if page.lang == 'en' %}
                    <a href="{{ page.url | remove: '/en' | relative_url }}" class="lang-link">中文</a>
                    <a href="#" class="lang-link active">EN</a>
                {% else %}
                    <a href="#" class="lang-link active">中文</a>
                    <a href="{{ '/en' | append: page.url | relative_url }}" class="lang-link">EN</a>
                {% endif %}
            </div>
        </div>
    </div>
</header>